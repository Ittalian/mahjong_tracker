# グラフ表示機能の実装完了

## 実装内容

競技ごとの詳細表示の数値データを棒グラフで視覚化する機能を実装しました。

### 変更したファイル

#### [pubspec.yaml](file:///c:/Users/bothm/dev_Dart/Flutter_Project/mahjong_tracker/pubspec.yaml)
- `fl_chart: ^0.69.0` を依存関係に追加

#### [chart_screen.dart](file:///c:/Users/bothm/dev_Dart/Flutter_Project/mahjong_tracker/lib/screens/chart_screen.dart) (新規作成)
新しいグラフ表示画面を作成：
- 集計データを受け取り棒グラフで表示
- 横スクロール対応（データ数 × 80pxで幅を計算、画面幅より小さい場合は画面幅に合わせる）
- グラフの色を収支の正負で変更（プラス：緑、マイナス：赤）
- タップでツールチップが表示され、項目名と金額を確認可能
- Y軸は自動的に最大・最小値を計算し、適切な間隔でグリッド線を表示
- X軸のラベルは縦書きで表示（スペース効率のため）

#### [category_view.dart](file:///c:/Users/bothm/dev_Dart/Flutter_Project/mahjong_tracker/lib/widgets/category_view.dart)
詳細表示モード時にグラフ表示機能を追加：
- グループ選択ドロップダウンの横にグラフアイコンのボタンを追加
- ボタンをタップすると`ChartScreen`に遷移
- 集計データ（`GroupingHelper.aggregateResults`の結果）をグラフ画面に渡す
- タイトルには競技名とグループ種別を含める

## 実装の特徴

### 横スクロール対応
データ数が多い場合、各バーに80pxの幅を確保し、横スクロール可能にしました。データ数が少ない場合は画面幅いっぱいに表示されます。

### 色分け
収支がプラスの項目は緑色、マイナスの項目は赤色で表示され、視覚的に分かりやすくなっています。

### インタラクティブ
バーをタップすると、項目名と金額が表示されるツールチップが表示されます。

### 自動スケーリング
Y軸の範囲は自動的に計算され、最大値・最小値より少し広い範囲を表示します。グリッド線の間隔も値の範囲に応じて適切に調整されます。

## テスト結果

### 静的解析
```bash
flutter analyze
```
実行結果：**No issues found!**

コンパイルエラーやLintエラーは一切ありません。

## 使用方法

1. アプリを起動し、任意の競技タブを選択
2. 画面上部の「詳細」ボタンをタップして詳細モードに切り替え
3. グループ種別を選択（例：麻雀の場合「タイプ」「ウマ」「レート」など）
4. ドロップダウンの右にある棒グラフアイコン📊をタップ
5. 選択したグループごとの収支が棒グラフで表示されます
6. バーをタップすると詳細情報が表示されます
7. データ数が多い場合は左右にスクロールして全体を確認できます

## 注意事項

> [!NOTE]
> Windows環境でのビルドはVisual Studioの設定が必要です。静的解析では問題ないため、実機またはエミュレータでの動作確認を推奨します。
